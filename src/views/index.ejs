<% include partials/header.ejs %>
<h1>Product</h1>

<table class="table table-bordered table-striped">
    <thead>
        <tr>
            <th>Category</th>
            <th>Name</th>
            <th>Price</th>
            <th>Image</th>
        </tr>
    </thead>
    <tbody>
        <% for(var i = 0; i < products.length; i++) { %>
            <tr>
                <td><%= products[i].category %></td>
                <td><%= products[i].name %></td>
                <td><%= products[i].price %></td>
                <td><img src="<%= products[i].cover %>" class="img-responsive" /></td>
            </tr>
        
        <% } %>
    </tbody>
</table>

<% if (pages) { %>
<nav aria-label="Page navigation">
    <ul class="pagination">
        <% if(current == 1) { %>
            <li>
                <a href="#" aria-label="Previous">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
        <% } else { %>
            <li>
                    <a href="/page/1" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                    </li>
        <% } %>

        <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
        <% if (i !== 1) { %>
            <li><a href="#">...</a></li>
        <% } %>

        <% for(; i <= (Number(current) + 4) && i <= pages; i++) { %>
            <% if (i == current) { %>
                <li><a href=""><%= i %></a></li>
            <% } else {%>
                <li><a href="/page/<%= i %>"><%= i %></a></li>
            <% } %>
            
            <% if (i == Number(current) + 4 && i < pages) { %>
                <li><a href="#">...</a></li>
            <% } %>

        <% } %>
        
        
        <% if(current == pages) { %>
            <li>
            <a href="#" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
            </a>
            </li>
        <% } else { %>
            <li>
                    <a href="/page/<%= pages %>" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                    </li>
            <% } %>
    </ul>
</nav>
<% } %>
<% include partials/footer.ejs %>